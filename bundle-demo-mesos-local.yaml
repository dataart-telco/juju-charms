demo:
  series: trusty
  services:
    mesos-master:
      charm: local:trusty/mesos-master
      expose: true
      constraints: "mem=1G"
      annotations:
        "gui-x": "1140"
        "gui-y": "570"
    mesos-slave: 
      charm: local:trusty/mesos-slave
      expose: true
      constraints: "mem=1G"
      annotations: 
        "gui-x": 1140
        "gui-y": 950
    calls-consumer:
      charm: local:trusty/tads2015-calls-consumer-4mesos
      annotations:
        "gui-x": 1710
        "gui-y": 950
    conference-call:
      charm: local:trusty/tads2015-conference-call-4mesos
      annotations:
        "gui-x": 1710
        "gui-y": 570
    sms-feedback:
      charm: local:trusty/tads2015-sms-feedback-4mesos
      annotations:
        "gui-x": 1710
        "gui-y": 190
    redis-master:
      charm: cs:~mbruzek/trusty/redis-master-0
      expose: true
      annotations:
        "gui-x": 2280
        "gui-y": 570
    telscale-restcomm:
      charm: local:trusty/telscale-restcomm-7.3.1
      expose: true
      constraints: "mem=1536M"
      annotations:
        "gui-x": 2280
        "gui-y": 950
    haproxy:
      charm: cs:trusty/haproxy-11
      expose: true
      annotations:
        "gui-x": 2280
        "gui-y": 190
    juju-gui:
      charm: cs:trusty/juju-gui-39
      expose: true
      annotations:
        "gui-x": 0
        "gui-y": 570
    monitor-server:
      charm: local:trusty/monitor-server
      expose: true
      constraints: "mem=512M"
      annotations:
        "gui-x": 380
        "gui-y": 570
      options:
        CHECK_PERIOD: 1
        SCALE_DOWN: 35
    monitor-db:
      charm: cs:~mbruzek/trusty/redis-master-0
      expose: true
      annotations:
        "gui-x": 380
        "gui-y": 190             
    monitor-agent-mesos:
      charm: local:trusty/monitor-agent-mesos
      annotations:
        "gui-x": 760
        "gui-y": 950
    monitor-agent-mesos-master:
      charm: local:trusty/monitor-agent-mesos-master
      annotations:
        "gui-x": 760
        "gui-y": 190
  relations:
# callc consumer
    - - calls-consumer:redis
      - redis-master:db
    - - calls-consumer:restcomm
      - telscale-restcomm:website
    - - haproxy:reverseproxy
      - calls-consumer:haproxy
    - - calls-consumer
      - mesos-master
# end 
# conference
    - - conference-call:redis
      - redis-master:db
    - - conference-call:restcomm
      - telscale-restcomm:website
    - - haproxy:reverseproxy
      - conference-call:haproxy
    - - conference-call
      - mesos-master
# end
# conference
    - - sms-feedback:redis
      - redis-master:db
    - - sms-feedback:restcomm
      - telscale-restcomm:website
    - - haproxy:reverseproxy
      - sms-feedback:haproxy
    - - sms-feedback
      - mesos-master
# end
# monitor server
    - - monitor-server:redis
      - monitor-db:redis-master
    - - monitor-server:api-server
      - juju-gui:web
# end
# mesos cluster
    - - mesos-master
      - mesos-slave
    - - monitor-agent-mesos:monitor-server
      - monitor-server:monitor-server
    - - monitor-agent-mesos
      - mesos-master
    - - monitor-agent-mesos
      - mesos-slave  
    - - monitor-agent-mesos-master:monitor-server
      - monitor-server:monitor-server
    - - monitor-agent-mesos-master
      - mesos-master  
    - - monitor-server
      - mesos-master
# end
